PART
{
	// --- general parameters ---
	name = kpaAim160
	module = Part
	author = Spartwo

	// --- asset parameters ---
	mesh = CUDA.mu
	rescaleFactor = 1

	// --- node definitions ---
	node_attach = 0.0, 0.075, -0.175, 0, 1, 0, 0
	node_stack_top = 0.0, 0.075, -0.175, 0, 1, 0, 0

	// --- editor parameters ---
	TechRequired = precisionEngineering
	entryCost = 5000
	cost = 2500
	category = none
	bdacategory = Missiles
	subcategory = 0
	
	attachRules = 1,1,0,0,1 // attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	bulkheadProfiles = srf
	
	title = #LOC_KPDynamics_CUDA_title
	manufacturer = #loc_BDArmory_agent_title  //Bahamuto Dynamics
	description = #LOC_KPDynamics_CUDA_description
	tags = #loc_BDArmory_part_bahaAim120_tags 
	
	// --- standard part parameters ---
	mass = 0.152
	dragModelType = default
	maximum_drag = 0.01
	minimum_drag = 0.01
	angularDrag = 2
	crashTolerance = 5
	maxTemp = 3600


	MODULE
	{
		name = MissileLauncher		
		missileType = missile

		shortName = #LOC_KPDynamics_CUDA_weapon

		// The flight characteristics of the AIM-160 are intended to be much the same as that of the AIM-120
		thrust = 55 //KN thrust during boost phase
		cruiseThrust = 30 //thrust during cruise phase
		dropTime = 0.55 //how many seconds after release until engine ignites
		boostTime = 2.2 //seconds of boost phase
		cruiseTime = 120 //seconds of cruise phase
		guidanceActive = true //missile has guidanceActive
		maxTurnRateDPS = 35 

		decoupleSpeed = 5		
		decoupleForward = false

		engineFailureRate = 0    // Probability the missile engine will fail to start (0-1), evaluated once on missile launch
		guidanceFailureRate = 0  // Probability the missile guidance will fail per second (0-1), evaluated every frame after launch

		audioClipPath = BDArmory/Sounds/rocketLoop
		exhaustPrefabPath = BDArmory/Models/exhaust/smallExhaust
		boostExhaustPrefabPath = BDArmory/Models/exhaust/mediumExhaust

		boostTransformName = boostTransform
		boostExhaustTransformName = boostTransform

		optimumAirspeed = 1272 //deals with how missile leads the target and calculation of turn radius for dynamic launch zone calculation, should match the max speed of your missile

		aero = true //Missile has aerodynamics
		maxTorque = 40
		steerMult = 10
		maxAoA = 45
		aeroSteerDamping = 4
		gLimit = 50
		liftArea = 0.0014

		homingType = aamLoft //air to air missile different types are AAM, AGM, Cruise, Ballistic, ProNav, and AugProNav

		// aamLoft
		LoftMaxAltitude = 18000
		LoftRangeOverride = 20000
		LoftAltitudeAdvMax = 15000
		LofMinAltitude = 500
		LoftAngle = 30
		LoftTermAngle = 20
		LoftRangeFac = 0.4
		LoftVertVelComp = 1

		targetingType = inertial
		maxOffBoresight = 120
		uncagedLock = true 
		lockedSensorFOV = 7 
		chaffEffectivity = 0.14
		activeRadarVelocityFilter = 20
		activeRadarRangeFilter = 1000

		inertialDrift = 0.025
		gpsUpdates = 0

		terminalGuidanceShouldActivate = true
		terminalManeuvering = true
		terminalGuidanceType = radar
		activeRadarRange = 9000
		terminalGuidanceDistance = 8000
		dumbTerminalGuidance = false

		terminalHoming = true
		terminalHomingType = ProNav //switches to ProNav at final engagement for a more accurate homing solution at expense of energy expenditure
		pronavGain = 3 // ProNav gain constant, only used with ProNav and AugProNav homing types (default is 3)
		terminalHomingRange = 8000

		minStaticLaunchRange = 500 // minimum launch range in meters assuming craft don't move, final min launch distance is dynamically calculated based on target/launching craft speeds
		maxStaticLaunchRange = 25000 // maximum launch range in meters assuming craft don't move, final max launch distance is dynamically calculated based on target/launching craft speeds

		radarLOAL = true //radar lock on after launch
		radarTimeout = 5 //timelimit without a detected target before Active Radar guidance fails and LOAL could not lock a target (default is 5).
		
		engageAir = true
		engageMissile = false
		engageGround = false
		engageSLW = false

		DetonationDistance = 6
		DetonateAtMinimumDistance = False
	}
	MODULE 
	{
		name = BDExplosivePart
		tntMass = 0.01
		warheadType = Standard
	}
	MODULE
	{
   		name = BDCustomWarhead
    		warheadType = AIM160
    		explModelPath = BDArmory/Models/explosion/explosion
    		explSoundPath = BDArmory/Sounds/explode1
    		bulletTexturePath = BDArmory/Textures/bullet
    		maxDeviation = 0
	}
	MODULE
	{
		name = ModulePartVariants
		baseVariant = Live
		useMultipleDragCubes = false
		VARIANT
		{
			name = Live
			displayName = #LOC_KPDynamics_Variant_Live
			themeName = GrayAndWhite
			primaryColor = #65552F
			secondaryColor = #BDBDBD
			TEXTURE
			{
				mainTextureURL = KerbalPowers/Armory/Parts/Missiles/Air-To-Air/AIM-160/CUDA_Tex
			}
		}
		VARIANT
		{
			name = Inert
			displayName = #LOC_KPDynamics_Variant_Inert
			themeName = GrayAndWhite
			primaryColor = #556CBA
			secondaryColor = #BDBDBD
			TEXTURE
			{
				mainTextureURL = KerbalPowers/Armory/Parts/Missiles/Air-To-Air/AIM-160/CUDA_Tex_Inert
			}
		}
	}	
}
